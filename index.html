<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PorchFitness - 13 Gentle Chair Exercises with AI Coach</title>
  <meta name="description" content="14 gentle chair exercises you can do on your porch. Get AI-powered voice coaching and step-by-step guidance. Perfect for seniors.">

  <!-- PWA Meta Tags -->
  <meta name="theme-color" content="#667eea">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="PorchFitness">
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" type="image/png" href="/images/icon-192.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/images/icon-192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="/images/icon-512.png">
  <link rel="apple-touch-icon" href="/images/icon-192.png">
  <link rel="shortcut icon" type="image/png" href="/images/icon-192.png">

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

  <!-- Custom Styles -->
  <style>
    /* Base font sizing for accessibility */
    html {
      font-size: 18px; /* Larger base for seniors */
    }
    
    /* High contrast, accessible design */
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
      line-height: 1.6;
    }
    
    /* Exercise cards - larger, clearer */
    .exercise-card {
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      border: 3px solid #e5e7eb;
      min-height: 280px;
    }
    .exercise-card:hover, .exercise-card:focus {
      transform: scale(1.05);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      border-color: #2563eb;
    }
    
    /* Buttons - minimum 44px touch target */
    .btn-primary {
      min-height: 56px;
      font-size: 1.25rem;
      font-weight: 700;
      padding: 1rem 2rem;
      border-radius: 12px;
    }
    
    /* Focus indicators for keyboard navigation */
    *:focus {
      outline: 4px solid #2563eb;
      outline-offset: 2px;
    }
    
    /* Skip to main content for screen readers */
    .skip-link {
      position: absolute;
      top: -40px;
      left: 0;
      background: #000;
      color: #fff;
      padding: 8px;
      text-decoration: none;
      z-index: 100;
    }
    .skip-link:focus {
      top: 0;
    }
  </style>
</head>
<body class="bg-white min-h-screen">

  <!-- Skip Navigation for Screen Readers -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- Header -->
  <header class="bg-blue-900 text-white shadow-lg sticky top-0 z-40" role="banner">
    <div class="max-w-7xl mx-auto px-6 py-6 flex items-center justify-between">
      <div class="flex items-center gap-4">
        <span class="text-5xl" role="img" aria-label="House icon">üè°</span>
        <div>
          <h1 class="text-3xl md:text-4xl font-bold">PorchFitness</h1>
          <p class="text-lg md:text-xl text-blue-100">Voice-Coached Chair Exercises</p>
        </div>
      </div>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="bg-blue-800 text-white py-16 px-6" role="region" aria-label="Welcome section">
    <div class="max-w-4xl mx-auto text-center">
      <h2 class="text-4xl md:text-6xl font-bold mb-6">
        13 Gentle Chair Exercises
      </h2>
      <p class="text-2xl md:text-3xl mb-8 font-semibold">
        Guided by Your Personal AI Voice Coach
      </p>
      <p class="text-xl md:text-2xl text-blue-50 max-w-2xl mx-auto leading-relaxed">
        Click any exercise card below to start your voice-guided workout. Perfect for seniors. No equipment needed!
      </p>
    </div>
  </section>

  <!-- Main Content -->
  <main id="main-content" class="max-w-7xl mx-auto px-6 py-16" role="main">

    <!-- Exercise Section Header -->
    <section class="mb-12 text-center" role="region" aria-label="Exercise selection">
      <h2 class="text-4xl md:text-5xl font-bold text-gray-900 mb-6">
        Choose an Exercise
      </h2>
      <p class="text-xl md:text-2xl text-gray-700 max-w-3xl mx-auto leading-relaxed">
        Click or tap any card below. Your AI coach will guide you through each movement with clear, spoken instructions.
      </p>
    </section>

    <!-- Exercise Grid - Larger cards for better visibility -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 mb-16" role="list" aria-label="Exercise list">

      <!-- Exercise 2: Seated Hamstring Stretch -->
      <article class="exercise-card bg-white rounded-2xl shadow-xl p-6 cursor-pointer focus:ring-4 focus:ring-blue-500"
               role="listitem"
               tabindex="0"
               onclick="openCoachChat('How do I do the seated hamstring stretch?')"
               onkeypress="if(event.key==='Enter'){openCoachChat('How do I do the seated hamstring stretch?')}"
               aria-label="Seated Hamstring Stretch for legs. Click to get voice coaching">
        <div class="bg-gradient-to-br from-green-100 to-blue-100 rounded-lg mb-3 h-40 flex items-center justify-center">
          <img src="images/seated-hamstring-stretch.jpg"
               alt="Seated Hamstring Stretch"
               class="w-full h-full object-cover rounded-lg"
               onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
          <div style="display:none;" class="w-full h-full flex items-center justify-center text-4xl">
            ü¶µ
          </div>
        </div>
        <h3 class="font-bold text-gray-900 text-sm sm:text-base mb-1">
          Hamstring Stretch
        </h3>
        <p class="text-xs text-gray-500">Seated ‚Ä¢ Legs</p>
        <button class="mt-2 w-full bg-blue-50 text-blue-600 py-2 rounded-lg text-xs font-semibold hover:bg-blue-100 transition">
          üé§ Get Coaching
        </button>
        <button onclick="event.stopPropagation(); logWorkout('Seated Hamstring Stretch')" class="mt-2 w-full bg-green-50 text-green-600 py-2 rounded-lg text-xs font-semibold hover:bg-green-100 transition">
          ‚úÖ Log Workout
        </button>
      </div>

      <!-- Exercise 3: Sit to Stands -->
      <div class="exercise-card bg-white rounded-xl shadow-lg p-4 cursor-pointer"
           onclick="openCoachChat('How do I do sit to stands?')">
        <div class="bg-gradient-to-br from-green-100 to-blue-100 rounded-lg mb-3 h-40 flex items-center justify-center">
          <img src="images/sit-to-stands.jpg"
               alt="Sit to Stands"
               class="w-full h-full object-cover rounded-lg"
               onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
          <div style="display:none;" class="w-full h-full flex items-center justify-center text-4xl">
            üí™
          </div>
        </div>
        <h3 class="font-bold text-gray-900 text-sm sm:text-base mb-1">
          Sit to Stands
        </h3>
        <p class="text-xs text-gray-500">Seated ‚Ä¢ Strength</p>
        <button class="mt-2 w-full bg-blue-50 text-blue-600 py-2 rounded-lg text-xs font-semibold hover:bg-blue-100 transition">
          üé§ Get Coaching
        </button>
        <button onclick="event.stopPropagation(); logWorkout('Sit to Stands')" class="mt-2 w-full bg-green-50 text-green-600 py-2 rounded-lg text-xs font-semibold hover:bg-green-100 transition">
          ‚úÖ Log Workout
        </button>
      </div>

      <!-- Exercise 4: Seated Cat-Cow -->
      <div class="exercise-card bg-white rounded-xl shadow-lg p-4 cursor-pointer"
           onclick="openCoachChat('How do I do seated cat-cow stretch?')">
        <div class="bg-gradient-to-br from-green-100 to-blue-100 rounded-lg mb-3 h-40 flex items-center justify-center">
          <img src="images/seated-cat-cow.jpg"
               alt="Seated Cat-Cow"
               class="w-full h-full object-cover rounded-lg"
               onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
          <div style="display:none;" class="w-full h-full flex items-center justify-center text-4xl">
            üê±
          </div>
        </div>
        <h3 class="font-bold text-gray-900 text-sm sm:text-base mb-1">
          Cat-Cow Stretch
        </h3>
        <p class="text-xs text-gray-500">Seated ‚Ä¢ Back</p>
        <button class="mt-2 w-full bg-blue-50 text-blue-600 py-2 rounded-lg text-xs font-semibold hover:bg-blue-100 transition">
          üé§ Get Coaching
        </button>
        <button onclick="event.stopPropagation(); logWorkout('Seated Cat-Cow')" class="mt-2 w-full bg-green-50 text-green-600 py-2 rounded-lg text-xs font-semibold hover:bg-green-100 transition">
          ‚úÖ Log Workout
        </button>
      </div>

      <!-- Exercise 5: Seated Arm Raises -->
      <div class="exercise-card bg-white rounded-xl shadow-lg p-4 cursor-pointer"
           onclick="openCoachChat('How do I do seated arm raises?')">
        <div class="bg-gradient-to-br from-green-100 to-blue-100 rounded-lg mb-3 h-40 flex items-center justify-center">
          <img src="images/seated-arm-raises.jpg"
               alt="Seated Arm Raises"
               class="w-full h-full object-cover rounded-lg"
               onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
          <div style="display:none;" class="w-full h-full flex items-center justify-center text-4xl">
            üôå
          </div>
        </div>
        <h3 class="font-bold text-gray-900 text-sm sm:text-base mb-1">
          Arm Raises
        </h3>
        <p class="text-xs text-gray-500">Seated ‚Ä¢ Shoulders</p>
        <button class="mt-2 w-full bg-blue-50 text-blue-600 py-2 rounded-lg text-xs font-semibold hover:bg-blue-100 transition">
          üé§ Get Coaching
        </button>
        <button onclick="event.stopPropagation(); logWorkout('Seated Arm Raises')" class="mt-2 w-full bg-green-50 text-green-600 py-2 rounded-lg text-xs font-semibold hover:bg-green-100 transition">
          ‚úÖ Log Workout
        </button>
      </div>

      <!-- Exercise 6: Seated Ankle Circles -->
      <div class="exercise-card bg-white rounded-xl shadow-lg p-4 cursor-pointer"
           onclick="openCoachChat('How do I do seated ankle circles?')">
        <div class="bg-gradient-to-br from-green-100 to-blue-100 rounded-lg mb-3 h-40 flex items-center justify-center">
          <img src="images/seated-ankle-circles.jpg"
               alt="Seated Ankle Circles"
               class="w-full h-full object-cover rounded-lg"
               onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
          <div style="display:none;" class="w-full h-full flex items-center justify-center text-4xl">
            ü¶∂
          </div>
        </div>
        <h3 class="font-bold text-gray-900 text-sm sm:text-base mb-1">
          Ankle Circles
        </h3>
        <p class="text-xs text-gray-500">Seated ‚Ä¢ Ankles</p>
        <button class="mt-2 w-full bg-blue-50 text-blue-600 py-2 rounded-lg text-xs font-semibold hover:bg-blue-100 transition">
          üé§ Get Coaching
        </button>
        <button onclick="event.stopPropagation(); logWorkout('Seated Ankle Circles')" class="mt-2 w-full bg-green-50 text-green-600 py-2 rounded-lg text-xs font-semibold hover:bg-green-100 transition">
          ‚úÖ Log Workout
        </button>
      </div>

      <!-- Exercise 7: Seated Side Bends -->
      <div class="exercise-card bg-white rounded-xl shadow-lg p-4 cursor-pointer"
           onclick="openCoachChat('How do I do seated side bends?')">
        <div class="bg-gradient-to-br from-green-100 to-blue-100 rounded-lg mb-3 h-40 flex items-center justify-center">
          <img src="images/seated-side-bends.jpg"
               alt="Seated Side Bends"
               class="w-full h-full object-cover rounded-lg"
               onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
          <div style="display:none;" class="w-full h-full flex items-center justify-center text-4xl">
            ü§∏
          </div>
        </div>
        <h3 class="font-bold text-gray-900 text-sm sm:text-base mb-1">
          Side Bends
        </h3>
        <p class="text-xs text-gray-500">Seated ‚Ä¢ Core</p>
        <button class="mt-2 w-full bg-blue-50 text-blue-600 py-2 rounded-lg text-xs font-semibold hover:bg-blue-100 transition">
          üé§ Get Coaching
        </button>
        <button onclick="event.stopPropagation(); logWorkout('Seated Side Bends')" class="mt-2 w-full bg-green-50 text-green-600 py-2 rounded-lg text-xs font-semibold hover:bg-green-100 transition">
          ‚úÖ Log Workout
        </button>
      </div>

      <!-- Exercise 8: Seated Spinal Twist -->
      <div class="exercise-card bg-white rounded-xl shadow-lg p-4 cursor-pointer"
           onclick="openCoachChat('How do I do seated spinal twist?')">
        <div class="bg-gradient-to-br from-green-100 to-blue-100 rounded-lg mb-3 h-40 flex items-center justify-center">
          <img src="images/seated-spinal-twist.jpg"
               alt="Seated Spinal Twist"
               class="w-full h-full object-cover rounded-lg"
               onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
          <div style="display:none;" class="w-full h-full flex items-center justify-center text-4xl">
            üîÑ
          </div>
        </div>
        <h3 class="font-bold text-gray-900 text-sm sm:text-base mb-1">
          Spinal Twist
        </h3>
        <p class="text-xs text-gray-500">Seated ‚Ä¢ Spine</p>
        <button class="mt-2 w-full bg-blue-50 text-blue-600 py-2 rounded-lg text-xs font-semibold hover:bg-blue-100 transition">
          üé§ Get Coaching
        </button>
        <button onclick="event.stopPropagation(); logWorkout('Seated Spinal Twist')" class="mt-2 w-full bg-green-50 text-green-600 py-2 rounded-lg text-xs font-semibold hover:bg-green-100 transition">
          ‚úÖ Log Workout
        </button>
      </div>

      <!-- Exercise 9: Figure 4 Stretch -->
      <div class="exercise-card bg-white rounded-xl shadow-lg p-4 cursor-pointer"
           onclick="openCoachChat('How do I do figure 4 stretch?')">
        <div class="bg-gradient-to-br from-green-100 to-blue-100 rounded-lg mb-3 h-40 flex items-center justify-center">
          <img src="images/figure-4-stretch.jpg"
               alt="Figure 4 Stretch"
               class="w-full h-full object-cover rounded-lg"
               onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
          <div style="display:none;" class="w-full h-full flex items-center justify-center text-4xl">
            4Ô∏è‚É£
          </div>
        </div>
        <h3 class="font-bold text-gray-900 text-sm sm:text-base mb-1">
          Figure 4 Stretch
        </h3>
        <p class="text-xs text-gray-500">Seated ‚Ä¢ Hip Opener</p>
        <button class="mt-2 w-full bg-blue-50 text-blue-600 py-2 rounded-lg text-xs font-semibold hover:bg-blue-100 transition">
          üé§ Get Coaching
        </button>
        <button onclick="event.stopPropagation(); logWorkout('Figure 4 Stretch')" class="mt-2 w-full bg-green-50 text-green-600 py-2 rounded-lg text-xs font-semibold hover:bg-green-100 transition">
          ‚úÖ Log Workout
        </button>
      </div>

      <!-- Exercise 10: Seated Shoulder Rolls -->
      <div class="exercise-card bg-white rounded-xl shadow-lg p-4 cursor-pointer"
           onclick="openCoachChat('How do I do seated shoulder rolls?')">
        <div class="bg-gradient-to-br from-green-100 to-blue-100 rounded-lg mb-3 h-40 flex items-center justify-center">
          <img src="images/seated-shoulder-rolls.jpg"
               alt="Seated Shoulder Rolls"
               class="w-full h-full object-cover rounded-lg"
               onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
          <div style="display:none;" class="w-full h-full flex items-center justify-center text-4xl">
            üîÑ
          </div>
        </div>
        <h3 class="font-bold text-gray-900 text-sm sm:text-base mb-1">
          Shoulder Rolls
        </h3>
        <p class="text-xs text-gray-500">Seated ‚Ä¢ Shoulders</p>
        <button class="mt-2 w-full bg-blue-50 text-blue-600 py-2 rounded-lg text-xs font-semibold hover:bg-blue-100 transition">
          üé§ Get Coaching
        </button>
        <button onclick="event.stopPropagation(); logWorkout('Seated Shoulder Rolls')" class="mt-2 w-full bg-green-50 text-green-600 py-2 rounded-lg text-xs font-semibold hover:bg-green-100 transition">
          ‚úÖ Log Workout
        </button>
      </div>

      <!-- Exercise 11: Seated Neck Stretches -->
      <div class="exercise-card bg-white rounded-xl shadow-lg p-4 cursor-pointer"
           onclick="openCoachChat('How do I do seated neck stretches?')">
        <div class="bg-gradient-to-br from-green-100 to-blue-100 rounded-lg mb-3 h-40 flex items-center justify-center">
          <img src="images/seated-neck-stretches.jpg"
               alt="Seated Neck Stretches"
               class="w-full h-full object-cover rounded-lg"
               onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
          <div style="display:none;" class="w-full h-full flex items-center justify-center text-4xl">
            üíÜ
          </div>
        </div>
        <h3 class="font-bold text-gray-900 text-sm sm:text-base mb-1">
          Neck Stretches
        </h3>
        <p class="text-xs text-gray-500">Seated ‚Ä¢ Neck</p>
        <button class="mt-2 w-full bg-blue-50 text-blue-600 py-2 rounded-lg text-xs font-semibold hover:bg-blue-100 transition">
          üé§ Get Coaching
        </button>
        <button onclick="event.stopPropagation(); logWorkout('Seated Neck Stretches')" class="mt-2 w-full bg-green-50 text-green-600 py-2 rounded-lg text-xs font-semibold hover:bg-green-100 transition">
          ‚úÖ Log Workout
        </button>
      </div>

      <!-- Exercise 12: Standing Calf Raises -->
      <div class="exercise-card bg-white rounded-xl shadow-lg p-4 cursor-pointer"
           onclick="openCoachChat('How do I do standing calf raises?')">
        <div class="bg-gradient-to-br from-green-100 to-blue-100 rounded-lg mb-3 h-40 flex items-center justify-center">
          <img src="images/standing-calf-raises.jpg"
               alt="Standing Calf Raises"
               class="w-full h-full object-cover rounded-lg"
               onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
          <div style="display:none;" class="w-full h-full flex items-center justify-center text-4xl">
            ü¶ø
          </div>
        </div>
        <h3 class="font-bold text-gray-900 text-sm sm:text-base mb-1">
          Calf Raises
        </h3>
        <p class="text-xs text-gray-500">Standing ‚Ä¢ Legs</p>
        <button class="mt-2 w-full bg-blue-50 text-blue-600 py-2 rounded-lg text-xs font-semibold hover:bg-blue-100 transition">
          üé§ Get Coaching
        </button>
        <button onclick="event.stopPropagation(); logWorkout('Standing Calf Raises')" class="mt-2 w-full bg-green-50 text-green-600 py-2 rounded-lg text-xs font-semibold hover:bg-green-100 transition">
          ‚úÖ Log Workout
        </button>
      </div>

      <!-- Exercise 13: Warrior I / Hip Flexor Stretch -->
      <div class="exercise-card bg-white rounded-xl shadow-lg p-4 cursor-pointer"
           onclick="openCoachChat('How do I do warrior one hip flexor stretch?')">
        <div class="bg-gradient-to-br from-green-100 to-blue-100 rounded-lg mb-3 h-40 flex items-center justify-center">
          <img src="images/warrior-1-hip-flexor.jpg"
               alt="Warrior I Hip Flexor Stretch"
               class="w-full h-full object-cover rounded-lg"
               onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
          <div style="display:none;" class="w-full h-full flex items-center justify-center text-4xl">
            üßò
          </div>
        </div>
        <h3 class="font-bold text-gray-900 text-sm sm:text-base mb-1">
          Warrior I
        </h3>
        <p class="text-xs text-gray-500">Standing ‚Ä¢ Hip Flexors</p>
        <button class="mt-2 w-full bg-blue-50 text-blue-600 py-2 rounded-lg text-xs font-semibold hover:bg-blue-100 transition">
          üé§ Get Coaching
        </button>
        <button onclick="event.stopPropagation(); logWorkout('Warrior I Hip Flexor Stretch')" class="mt-2 w-full bg-green-50 text-green-600 py-2 rounded-lg text-xs font-semibold hover:bg-green-100 transition">
          ‚úÖ Log Workout
        </button>
      </div>

    </div>



  </main>

  <!-- Log Workout Modal -->
  <div id="logWorkoutModal" class="hidden fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-6" role="dialog" aria-modal="true" aria-labelledby="logModalTitle">
    <div class="bg-white rounded-3xl p-10 max-w-2xl w-full shadow-2xl relative">
      <button onclick="closeLogWorkoutModal()" class="absolute top-4 right-4 text-4xl text-gray-500 hover:text-gray-700" aria-label="Close logging form">√ó</button>
      <h2 id="logModalTitle" class="text-4xl font-bold text-gray-900 mb-6">Log Your Workout</h2>
      <p class="text-2xl text-gray-700 mb-8">How did <span id="logExerciseName" class="font-bold">this exercise</span> feel?</p>
      
      <div class="mb-8">
        <label for="painLevel" class="block text-2xl font-bold text-gray-900 mb-4">Pain Level (0 = No Pain, 10 = Severe)</label>
        <input type="range" id="painLevel" name="painLevel" min="0" max="10" value="0" 
               class="w-full h-4 bg-gray-200 rounded-lg appearance-none cursor-pointer"
               oninput="document.getElementById('painValue').textContent = this.value">
        <div class="text-center mt-4">
          <span id="painValue" class="text-5xl font-bold text-blue-600">0</span>
          <span class="text-2xl text-gray-600"> / 10</span>
        </div>
      </div>
      
      <div class="mb-8">
        <label for="workoutNotes" class="block text-2xl font-bold text-gray-900 mb-4">Notes (Optional)</label>
        <textarea id="workoutNotes" rows="4" 
                  class="w-full p-4 text-2xl border-4 border-gray-300 rounded-xl focus:border-blue-500"
                  placeholder="How did it feel? Any observations?"></textarea>
      </div>
      
      <button onclick="saveWorkoutLog()" class="w-full bg-blue-600 text-white btn-primary hover:bg-blue-700 transition-all shadow-xl text-2xl">
        üíæ Save Workout Log
      </button>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-gray-900 text-white py-8 mt-16">
    <div class="max-w-7xl mx-auto px-4 text-center">
      <p class="text-gray-400 mb-2">
        üè° PorchFitness
      </p>
      <p class="text-gray-600 text-xs mt-4">
        ¬© 2025 PorchFitness ‚Ä¢ All Rights Reserved
      </p>
    </div>
  </footer>

  <!-- ElevenLabs Conversational AI Widget -->
  <!-- Agent: Samantha (Porch Fitness Coach) -->
  <script src="https://elevenlabs.io/convai-widget/index.js" async type="text/javascript"></script>
  <elevenlabs-convai agent-id="agent_5201kd2291x0ffysp0e4z7c57ksr"></elevenlabs-convai>

  <!-- PWA Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/service-worker.js')
          .then((registration) => {
            console.log('ServiceWorker registered:', registration.scope);
          })
          .catch((error) => {
            console.log('ServiceWorker registration failed:', error);
          });
      });
    }
  </script>

  <!-- JavaScript -->
  <script>
    // Firebase Configuration
    const firebaseConfig = {
      apiKey: "AIzaSyC1g3a0qVaB9xQS8eiXAKrOpOgKz2Xz2tg",
      authDomain: "porchfitness-98628.firebaseapp.com",
      projectId: "porchfitness-98628",
      storageBucket: "porchfitness-98628.firebasestorage.app",
      messagingSenderId: "441846637533",
      appId: "1:441846637533:web:37b9a18e7bf2f25e20e88c"
    };
    firebase.initializeApp(firebaseConfig);
    
    // Sign in anonymously for simple logging
    firebase.auth().signInAnonymously().catch((error) => {
      console.error('Auth error:', error);
    });
    
    const GEMINI_API_KEY = 'YOUR_GEMINI_API_KEY_HERE';
    let currentPlan = '';
    let currentExerciseName = '';

    function openCoachChat(question) {
      console.log('User wants to learn:', question);
      alert('üëã Click the AI Coach button in the bottom right corner to start your guided exercise session!');
    }

    // Workout Logging Functions
    function logWorkout(exerciseName) {
      currentExerciseName = exerciseName;
      document.getElementById('logExerciseName').textContent = exerciseName;
      document.getElementById('painLevel').value = 0;
      document.getElementById('painValue').textContent = '0';
      document.getElementById('workoutNotes').value = '';
      document.getElementById('logWorkoutModal').classList.remove('hidden');
    }

    function closeLogWorkoutModal() {
      document.getElementById('logWorkoutModal').classList.add('hidden');
    }

    async function saveWorkoutLog() {
      const user = firebase.auth().currentUser;
      if (!user) {
        alert('Please wait a moment for authentication to complete.');
        return;
      }

      const painLevel = parseInt(document.getElementById('painLevel').value);
      const notes = document.getElementById('workoutNotes').value.trim();

      try {
        await firebase.firestore()
          .collection('users')
          .doc(user.uid)
          .collection('sessions')
          .add({
            exerciseName: currentExerciseName,
            painLevel: painLevel,
            notes: notes,
            repsCompleted: 0,
            durationSeconds: 0,
            date: firebase.firestore.FieldValue.serverTimestamp()
          });

        closeLogWorkoutModal();
        alert('‚úÖ Workout logged successfully!');
      } catch (error) {
        console.error('Error saving workout log:', error);
        alert('Error saving workout. Please try again.');
      }
    }
  </script>

</body>
</html>
